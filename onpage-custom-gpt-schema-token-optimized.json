{
  "openapi": "3.1.0",
  "info": {
    "title": "DataForSEO OnPage APIs - Token-Optimiert",
    "description": "üöÄ Token-optimierte OnPage APIs f√ºr Custom GPT - Reduzierte Antwortgr√∂√üen f√ºr bessere Performance",
    "version": "2.1.0"
  },
  "servers": [
    {
      "url": "https://yourank-mcp.vercel.app",
      "description": "Vercel Production Server"
    }
  ],
  "security": [
    {
      "basicAuth": []
    }
  ],
  "paths": {
    "/v3/onpage_core": {
      "post": {
        "summary": "üí∞ OnPage Kernfunktionen",
        "description": "‚ö†Ô∏è KOSTENPFLICHTIG: Task erstellen, Zusammenfassung abrufen, fertige Tasks. Status: Ben√∂tigt DataForSEO Credits",
        "operationId": "onPageCore",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["task_post", "summary", "tasks_ready"],
                    "description": "Art der Operation"
                  },
                  "target": {
                    "type": "string",
                    "description": "URL der zu analysierenden Website (nur f√ºr task_post)"
                  },
                  "id": {
                    "type": "string",
                    "description": "Task ID (f√ºr summary)"
                  },
                  "language_code": {
                    "type": "string",
                    "description": "Sprachcode",
                    "default": "en"
                  },
                  "location_name": {
                    "type": "string",
                    "description": "Standort",
                    "default": "United States"
                  },
                  "device": {
                    "type": "string",
                    "enum": ["desktop", "mobile"],
                    "description": "Ger√§tetyp",
                    "default": "desktop"
                  },
                  "max_crawl_pages": {
                    "type": "integer",
                    "description": "Maximale Anzahl der zu crawlenden Seiten",
                    "default": 1
                  }
                },
                "required": ["type"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OnPage Kernfunktion erfolgreich",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status_code": {"type": "integer"},
                    "task_id": {"type": "string"},
                    "status_message": {"type": "string"},
                    "tasks_count": {"type": "integer"},
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_pages": {"type": "integer"},
                        "crawl_status": {"type": "string"},
                        "progress": {"type": "string"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v3/onpage_analysis": {
      "post": {
        "summary": "üí∞ OnPage Analyse-Tools",
        "description": "‚ö†Ô∏è KOSTENPFLICHTIG: Seiten, Ressourcen, Links, Duplicate Content, Performance analysieren. Status: Ben√∂tigt DataForSEO Credits",
        "operationId": "onPageAnalysis",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["pages", "resources", "links", "duplicate_tags", "duplicate_content", "waterfall", "keyword_density"],
                    "description": "Art der Analyse"
                  },
                  "id": {
                    "type": "string",
                    "description": "Task ID"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL der zu analysierenden Seite (f√ºr pages, waterfall, keyword_density)"
                  },
                  "limit": {
                    "type": "integer",
                    "description": "Anzahl der Ergebnisse",
                    "default": 10,
                    "maximum": 50
                  },
                  "summary_only": {
                    "type": "boolean",
                    "description": "Nur Zusammenfassung ohne Details",
                    "default": true
                  }
                },
                "required": ["type", "id"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OnPage Analyse erfolgreich",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status_code": {"type": "integer"},
                    "analysis_type": {"type": "string"},
                    "total_items": {"type": "integer"},
                    "items_returned": {"type": "integer"},
                    "summary": {
                      "type": "object",
                      "properties": {
                        "pages_count": {"type": "integer"},
                        "resources_count": {"type": "integer"},
                        "links_count": {"type": "integer"},
                        "duplicate_issues": {"type": "integer"},
                        "performance_score": {"type": "number"}
                      }
                    },
                    "top_items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "url": {"type": "string"},
                          "title": {"type": "string"},
                          "score": {"type": "number"},
                          "issues": {"type": "integer"}
                        }
                      },
                      "maxItems": 10
                    },
                    "blob_storage": {
                      "type": "object",
                      "properties": {
                        "storage": {"type": "string"},
                        "results_url": {"type": "string"},
                        "proxy_url": {"type": "string"},
                        "size_bytes": {"type": "integer"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v3/onpage_content": {
      "post": {
        "summary": "üí∞ OnPage Content-Tools",
        "description": "‚ö†Ô∏è KOSTENPFLICHTIG: HTML, Screenshots, Content-Parsing, Instant Pages. Status: Ben√∂tigt DataForSEO Credits",
        "operationId": "onPageContent",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["raw_html", "page_screenshot", "content_parsing", "content_parsing_live", "instant_pages"],
                    "description": "Art der Content-Operation"
                  },
                  "id": {
                    "type": "string",
                    "description": "Task ID (f√ºr raw_html, page_screenshot, content_parsing)"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL der zu analysierenden Seite"
                  },
                  "limit": {
                    "type": "integer",
                    "description": "Anzahl der Ergebnisse",
                    "default": 5,
                    "maximum": 20
                  },
                  "screenshot_width": {
                    "type": "integer",
                    "description": "Screenshot-Breite (f√ºr page_screenshot)",
                    "default": 1920
                  },
                  "screenshot_height": {
                    "type": "integer",
                    "description": "Screenshot-H√∂he (f√ºr page_screenshot)",
                    "default": 1080
                  },
                  "summary_only": {
                    "type": "boolean",
                    "description": "Nur Zusammenfassung ohne Details",
                    "default": true
                  }
                },
                "required": ["type"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OnPage Content-Operation erfolgreich",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status_code": {"type": "integer"},
                    "content_type": {"type": "string"},
                    "url": {"type": "string"},
                    "summary": {
                      "type": "object",
                      "properties": {
                        "title": {"type": "string"},
                        "meta_description": {"type": "string"},
                        "headings_count": {"type": "integer"},
                        "links_count": {"type": "integer"},
                        "images_count": {"type": "integer"},
                        "word_count": {"type": "integer"}
                      }
                    },
                    "preview": {
                      "type": "object",
                      "properties": {
                        "html_preview": {"type": "string", "maxLength": 500},
                        "screenshot_url": {"type": "string"},
                        "content_preview": {"type": "string", "maxLength": 1000}
                      }
                    },
                    "blob_storage": {
                      "type": "object",
                      "properties": {
                        "storage": {"type": "string"},
                        "results_url": {"type": "string"},
                        "proxy_url": {"type": "string"},
                        "size_bytes": {"type": "integer"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v3/onpage_lighthouse": {
      "post": {
        "summary": "üí∞ OnPage Lighthouse-Tools",
        "description": "‚ö†Ô∏è KOSTENPFLICHTIG: Lighthouse-Analyse f√ºr Performance, Accessibility, SEO. Status: Ben√∂tigt DataForSEO Credits",
        "operationId": "onPageLighthouse",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["languages", "audits", "versions", "task_post", "tasks_ready", "task_get", "summary", "live"],
                    "description": "Art der Lighthouse-Operation"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL der zu analysierenden Seite (f√ºr task_post, live)"
                  },
                  "id": {
                    "type": "string",
                    "description": "Task ID (f√ºr task_get, summary)"
                  },
                  "language_code": {
                    "type": "string",
                    "description": "Sprachcode",
                    "default": "en"
                  },
                  "category": {
                    "type": "array",
                    "items": {"type": "string"},
                    "description": "Lighthouse-Kategorien (performance, accessibility, seo, pwa, best-practices)"
                  },
                  "version": {
                    "type": "string",
                    "description": "Lighthouse-Version"
                  },
                  "summary_only": {
                    "type": "boolean",
                    "description": "Nur Zusammenfassung ohne Details",
                    "default": true
                  },
                  "max_issues": {
                    "type": "integer",
                    "description": "Maximale Anzahl der Issues",
                    "default": 10,
                    "maximum": 20
                  }
                },
                "required": ["type"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lighthouse-Operation erfolgreich",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status_code": {"type": "integer"},
                    "status_message": {"type": "string"},
                    "task_id": {"type": "string"},
                    "url": {"type": "string"},
                    "fetch_time": {"type": "string"},
                    "lighthouse_version": {"type": "string"},
                    "scores": {
                      "type": "object",
                      "properties": {
                        "performance": {"type": "number"},
                        "accessibility": {"type": "number"},
                        "seo": {"type": "number"},
                        "best-practices": {"type": "number"},
                        "pwa": {"type": "number"}
                      }
                    },
                    "performance_metrics": {
                      "type": "object",
                      "properties": {
                        "first_contentful_paint": {"type": "number"},
                        "largest_contentful_paint": {"type": "number"},
                        "cumulative_layout_shift": {"type": "number"},
                        "total_blocking_time": {"type": "number"},
                        "speed_index": {"type": "number"}
                      }
                    },
                    "top_issues": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "title": {"type": "string"},
                          "score": {"type": "number"},
                          "category": {"type": "string"},
                          "impact": {"type": "string"}
                        }
                      },
                      "maxItems": 10
                    },
                    "category_summary": {
                      "type": "object",
                      "properties": {
                        "performance": {"type": "object", "properties": {"score": {"type": "number"}, "issues_count": {"type": "integer"}}},
                        "accessibility": {"type": "object", "properties": {"score": {"type": "number"}, "issues_count": {"type": "integer"}}},
                        "seo": {"type": "object", "properties": {"score": {"type": "number"}, "issues_count": {"type": "integer"}}},
                        "best-practices": {"type": "object", "properties": {"score": {"type": "number"}, "issues_count": {"type": "integer"}}},
                        "pwa": {"type": "object", "properties": {"score": {"type": "number"}, "issues_count": {"type": "integer"}}}
                      }
                    },
                    "audit_summary": {
                      "type": "object",
                      "properties": {
                        "total_audits": {"type": "integer"},
                        "passed_audits": {"type": "integer"},
                        "failed_audits": {"type": "integer"},
                        "not_applicable": {"type": "integer"}
                      }
                    },
                    "blob_storage": {
                      "type": "object",
                      "properties": {
                        "storage": {"type": "string"},
                        "results_url": {"type": "string"},
                        "proxy_url": {"type": "string"},
                        "size_bytes": {"type": "integer"},
                        "expires_at": {"type": "string"}
                      }
                    },
                    "_message": {"type": "string", "description": "Hinweis √ºber vollst√§ndige Daten"}
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v3/onpage_management": {
      "post": {
        "summary": "üí∞ OnPage Verwaltung",
        "description": "‚ö†Ô∏è KOSTENPFLICHTIG: Task-Verwaltung, Fehler, Filter, Redirects, Microdata. Status: Ben√∂tigt DataForSEO Credits",
        "operationId": "onPageManagement",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["id_list", "errors", "force_stop", "available_filters", "pages_by_resource", "redirect_chains", "non_indexable", "microdata"],
                    "description": "Art der Verwaltungs-Operation"
                  },
                  "id": {
                    "type": "string",
                    "description": "Task ID (f√ºr errors, force_stop, pages_by_resource, redirect_chains, non_indexable, microdata)"
                  },
                  "date_from": {
                    "type": "string",
                    "description": "Startdatum (YYYY-MM-DD) f√ºr id_list, errors"
                  },
                  "date_to": {
                    "type": "string",
                    "description": "Enddatum (YYYY-MM-DD) f√ºr id_list, errors"
                  },
                  "resource_url": {
                    "type": "string",
                    "description": "URL der Resource (f√ºr pages_by_resource)"
                  },
                  "limit": {
                    "type": "integer",
                    "description": "Anzahl der Ergebnisse",
                    "default": 10,
                    "maximum": 50
                  },
                  "summary_only": {
                    "type": "boolean",
                    "description": "Nur Zusammenfassung ohne Details",
                    "default": true
                  }
                },
                "required": ["type"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OnPage Verwaltung erfolgreich",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status_code": {"type": "integer"},
                    "operation_type": {"type": "string"},
                    "total_items": {"type": "integer"},
                    "items_returned": {"type": "integer"},
                    "summary": {
                      "type": "object",
                      "properties": {
                        "task_count": {"type": "integer"},
                        "error_count": {"type": "integer"},
                        "filter_count": {"type": "integer"},
                        "redirect_count": {"type": "integer"},
                        "non_indexable_count": {"type": "integer"}
                      }
                    },
                    "top_items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "url": {"type": "string"},
                          "status": {"type": "string"},
                          "error_message": {"type": "string"},
                          "created_at": {"type": "string"}
                        }
                      },
                      "maxItems": 10
                    },
                    "blob_storage": {
                      "type": "object",
                      "properties": {
                        "storage": {"type": "string"},
                        "results_url": {"type": "string"},
                        "proxy_url": {"type": "string"},
                        "size_bytes": {"type": "integer"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "basicAuth": {
        "type": "http",
        "scheme": "basic"
      }
    },
    "schemas": {
      "ServerStatusResponse": {
        "type": "object",
        "properties": {
          "status": {"type": "string"},
          "message": {"type": "string"},
          "timestamp": {"type": "string"}
        }
      }
    }
  }
}
